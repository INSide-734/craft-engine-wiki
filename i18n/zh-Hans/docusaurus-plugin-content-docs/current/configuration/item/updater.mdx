---
title: 🔄 物品更新器
id: updater
---

## 简介

在配置物品时，我们可能会忽略某些细节，需要调整玩家已有的物品数据。这时就需要物品更新器（Item Updater）——它能更新服务器上实际物品的数据。

由于更新器的工作机制（在特定事件时替换物品），它会带来一定的性能开销。您可以在 **config.yml** 中配置哪些事件会触发物品更新。默认情况下，所有触发条件都是关闭状态，您可以根据需要启用它们。

```yaml
item:
  update-triggers:
    click-in-inventory: false # 对创造模式玩家无效
    drop: false
    pick-up: false
    ...more
```

:::tip
如果只需要更新物品的视觉元素（如custom-model-data、item-model、lore或name），推荐使用 `client-bound-data` 而非物品更新器。
:::

配置更新器只需按照以下格式添加新的 updater 部分。物品默认版本号为0，插件会将其更新到最新版本。

以下示例中：
- 版本为0的物品会同时执行更新逻辑1和2
- 版本为1的物品只会应用逻辑2

```yaml
items:
  default:my_sword:
    material: wooden_sword
    custom-model-data: 1000
    updater:
      1:
        type: apply_data
        data:
          item-name: First Update
      # 可以用列表形式同时应用多个更新器
      2:
        - type: apply_data
          data:
            lore: 
              - "Second Update"
        - type: transmute
          material: wooden_sword
```

## 更新器类型

### apply_data

应用任何CraftEngine支持的 [物品数据](./data.mdx)

```yaml
type: apply_data
data:
  item-name: 第一次更新
```

### transmute

转换物品的基础材质（保留所有组件/NBT数据）

```yaml
type: transmute
material: wooden_sword
```

### reset

立即将物品更新到最新状态（保留指定组件/NBT标签）

```yaml
type: reset
# 1.20.5+
keep-components:
  - minecraft:enchantments
# 旧版本
keep-tags:
  - Enchantments
```
